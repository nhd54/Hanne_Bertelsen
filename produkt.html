<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <title>Produkter</title>
</head>

<body>

    <section id="main">
        <header id="hovedmenu">


        </header>

        <article id="content" style="min-height:60vw;">

            <section class="welcome"> </section>

            <section id="main_content">

                <div class="enkelt_produkt">
                    <template>
                    <div class="produkt">
                        <div class="stortbillede"></div>
                        <div class="lille_billede1"></div>
                        <div class="lille_billede2"></div>
                        <div class="lille_billede3"></div>


                        <h2></h2>


                            <div class="info">
                                <span class="kategori"><a href="#"></a></span>
                                <span class="farve"></span>
                                <span class="str"></span>
                                <span class="materiale"></span>
                                <span class="pris"></span>
                            </div>
                            <p></p>
                    </div>
                </template>
                </div>
            </section>

        </article>

    </section>
    <footer>

    </footer>

    <script>
        let jsonUrl = "http://designstorm.dk/kea/2-semester-eksamen/wordpress/wp-json/wp/v2/produkter";
        let produkt = [];
        let display = document.querySelector(".enkelt_produkt");
        let template = document.querySelector("template");

        document.addEventListener("DOMContentLoaded", hentJson);

        async function hentJson() {
            let dataJson = await fetch(jsonUrl);
            produkt = await dataJson.json();
            console.log(produkt);
            hentProdukt();
        }

        function hentProdukt() {

            let urlParams = new URLSearchParams(window.location.search);
            let urlId = urlParams.get("produkt");
            let klon = template.cloneNode(true).content;
            console.log(urlId);
            let single = produkt.find(enkelt_produkt => {
                if (urlId == enkelt_produkt.id) {

                    console.log("jeg virker");

                    console.log(klon);
                    klon.querySelector("h2").innerHTML = enkelt_produkt.title.rendered;
                    klon.querySelector(".stortbillede").innerHTML = '<img src="' + enkelt_produkt.better_featured_image.media_details.sizes.medium.source_url + ' " />';
                    klon.querySelector(".lille_billede1").innerHTML = '<img src="' + enkelt_produkt.acf.billede1.url + ' " />';
                    klon.querySelector(".lille_billede2").innerHTML = '<img src="' + enkelt_produkt.acf.billede2.url + ' " />';
                    klon.querySelector(".lille_billede3").innerHTML = '<img src="' + enkelt_produkt.acf.billede3.url + ' " />';
                    klon.querySelector("p").innerHTML = enkelt_produkt.content.rendered;
                    klon.querySelector(".kategori").innerHTML = "kategori: <br>" + enkelt_produkt.acf.kategori;
                    klon.querySelector(".farve").innerHTML = "farve: <br>" + enkelt_produkt.acf.farve;
                    klon.querySelector(".str").innerHTML = "St√∏rrelse: <br>" + enkelt_produkt.acf.storrelse;
                    klon.querySelector(".materiale").innerHTML = "materiale: <br>" + enkelt_produkt.acf.materiale;
                    klon.querySelector(".pris").innerHTML = "pris: <br>" + enkelt_produkt.acf.pris + ",-";

                    display.appendChild(klon);
                }
            })

        }

    </script>
</body>

</html>
